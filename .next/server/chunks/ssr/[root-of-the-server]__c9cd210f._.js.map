{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/branching-narrative-system.ts"],"sourcesContent":["\n'use server';\n/**\n * @fileOverview This file defines the Genkit flow for the BranchingNarrativeSystem story.\n *\n * - generateNextScenario - A function that generates the next game scenario based on player context.\n * - NarrativeInput - The input type for the generateNextScenario function.\n * - NarrativeOutput - The return type for the generateNextScenario function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst NarrativeInputSchema = z.object({\n  playerClass: z.string().describe('The class of the player character.'),\n  level: z.number().describe('The current level of the player.'),\n  location: z.string().describe('The current location in the game.'),\n  choices: z.array(z.object({\n    id: z.string().describe('The ID of the choice made.'),\n    text: z.string().describe('The text of the choice made.'),\n    tags: z.array(z.string()).describe('Tags associated with the choice (e.g., STEALTH, COMBAT, DIPLOMACY).'),\n  })).describe('The choices the player has made so far.'),\n  reputation: z.object({\n    stealth: z.number().describe('The player reputation for stealth.'),\n    combat: z.number().describe('The player reputation for combat.'),\n    diplomacy: z.number().describe('The player reputation for diplomacy.'),\n  }).describe('The player reputation.'),\n  unlockedPaths: z.array(z.string()).describe('The paths unlocked by the player.'),\n  questFlags: z.record(z.string(), z.any()).describe('The quest flags, a map of quest IDs to their state (e.g., \"started\", \"completed\").'),\n});\nexport type NarrativeInput = z.infer<typeof NarrativeInputSchema>;\n\nconst NarrativeOutputSchema = z.object({\n  scenarioText: z.string().describe('The generated scenario text.'),\n  choices: z.array(z.object({\n    id: z.string().describe('A unique ID for the choice (e.g., \"A\", \"B\", \"C\").'),\n    text: z.string().describe('The text of the choice.'),\n    tags: z.array(z.string()).describe('An array of tags classifying the choice (e.g., COMBAT, DIPLOMACY, STEALTH, NPC_INTERACTION).'),\n  })).describe('The choices available to the player.'),\n});\nexport type NarrativeOutput = z.infer<typeof NarrativeOutputSchema>;\n\nexport async function generateNextScenario(input: NarrativeInput): Promise<NarrativeOutput> {\n  return branchingNarrativeFlow(input);\n}\n\nconst branchingNarrativePrompt = ai.definePrompt({\n  name: 'branchingNarrativePrompt',\n  input: {schema: NarrativeInputSchema},\n  output: {schema: NarrativeOutputSchema},\n  prompt: `You are the Fartmaster, the master storyteller for Poot Quest. Your purpose is to weave a branching tale where success and chaos are both logical consequences of who the player isâ€”not random dice rolls, but fate filtered through the essence of their own gaseous soul.\n\n  **The Fartmaster's Creed:**\n  1.  **The World Remembers:** Every adventure must feel uniquely personal. NPCs must remember the character's actions and \"scents\" (reputation). Environments should respond to their personality. A character known for destructive rage might find already-shattered doorways, while a sneaky character finds paths others have missed.\n  2.  **Character is Fate:** Your narration must adapt and mutate the world based on the player's class, personality, and moral quirks. A Sneaky Rogue who slinks past danger might find their cowardice has consequences later. A Barbarian of Beans might destroy an obstacle with brute flatulence, permanently altering the map.\n  3.  **Ripple Effects:** Each decision, from the smell of courage to the aroma of betrayal, must ripple through the world. A compassionate act could lead to an unlikely ally. Greed could lead to cursed treasure. Overconfidence might cause a spell to literally backfire.\n\n  **Player Context Analysis:**\n  -   **Class:** {{playerClass}} (Level {{level}})\n  -   **Location:** {{location}}\n  -   **Reputation:** Stealth: {{reputation.stealth}}, Combat: {{reputation.combat}}, Diplomacy: {{reputation.diplomacy}}\n  -   **Past Choices & Actions:**\n      {{#each choices}}\n      - {{this.text}} ({{#each this.tags}}{{@key}}{{#if @last}}{{else}}, {{/if}}{{/each}})\n      {{/each}}\n  -   **Active Quests:** {{#each questFlags}} {{this}} {{/each}}\n  -   **Unlocked Story Paths:** {{unlockedPaths}}\n\n  **Your Task:**\n  Analyze all of the above context. Generate the next scenario and three distinct, compelling choices (A, B, C).\n  1.  **Reactive Scenario:** Write a scenario that is a direct consequence of the character's being. If they are on a quest, the scenario should be related to that quest. If they are a high-combat barbarian, maybe they're ambushed by someone wanting to test their strength. If they are a high-diplomacy paladin who just negotiated peace, perhaps they are greeted as a hero.\n  2.  **Character-Driven Choices:** The choices you offer must reflect the character's core attributes. There should be at least one choice that aligns perfectly with their class or highest reputation score (e.g., a stealthy option for a Rogue, a diplomatic one for a Paladin). **Also, include a choice with the 'NPC_INTERACTION' tag occasionally to allow the player to meet new characters.**\n  3.  **Tag Your Choices:** Each choice must have at least one tag: \\`STEALTH\\`, \\`COMBAT\\`, \\`DIPLOMACY\\`, or \\`NPC_INTERACTION\\`. You can add more descriptive tags if needed. A choice can have multiple tags, like \\`['COMBAT', 'GREED']\\`.\n\n  The output MUST conform to the schema. Make the story a living reflection of the player's soul.`,\n});\n\nconst branchingNarrativeFlow = ai.defineFlow(\n  {\n    name: 'branchingNarrativeFlow',\n    inputSchema: NarrativeInputSchema,\n    outputSchema: NarrativeOutputSchema,\n  },\n  async input => {\n    const {output} = await branchingNarrativePrompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;;IA0CsB,uBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/separator.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI/B,CACE,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,aAAa,IAAI,EAAE,GAAG,OAAO,EACtE,oBAEA,8OAAC,qKAAA,CAAA,OAAuB;QACtB,KAAK;QACL,YAAY;QACZ,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sBACA,gBAAgB,eAAe,mBAAmB,kBAClD;QAED,GAAG,KAAK;;;;;;AAIf,UAAU,WAAW,GAAG,qKAAA,CAAA,OAAuB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/game-data.ts"],"sourcesContent":["\nexport type CardData = {\n    name: string;\n    description: string;\n    manaCost: number;\n    attack: number;\n    defense: number;\n    healing: number;\n};\n\nexport const CARD_DATA: { [key: string]: CardData } = {\n    \"Backstab\": { name: \"Backstab\", description: \"A swift, high-damage attack.\", manaCost: 2, attack: 10, defense: 0, healing: 0 },\n    \"Silent But Deadly\": { name: \"Silent But Deadly\", description: \"A moderate attack that ignores some defense.\", manaCost: 3, attack: 5, defense: 0, healing: 0 },\n    \"Smoke Bomb\": { name: \"Smoke Bomb\", description: \"Gain a small amount of defense.\", manaCost: 1, attack: 0, defense: 5, healing: 0 },\n    \"Basic Attack\": { name: \"Basic Attack\", description: \"A simple, low-cost attack.\", manaCost: 1, attack: 3, defense: 0, healing: 0 },\n    \"Smell the Truth\": { name: \"Smell the Truth\", description: \"A weak attack that reveals enemy weaknesses.\", manaCost: 3, attack: 2, defense: 0, healing: 0 },\n    \"Holy Shield\": { name: \"Holy Shield\", description: \"Greatly increases your defense for one turn.\", manaCost: 2, attack: 0, defense: 15, healing: 0 },\n    \"Purify\": { name: \"Purify\", description: \"Heal yourself for a small amount.\", manaCost: 2, attack: 0, defense: 0, healing: 8 },\n    \"Gas Cloud\": { name: \"Gas Cloud\", description: \"A potent area-of-effect attack.\", manaCost: 4, attack: 8, defense: 0, healing: 0 },\n    \"Chain Lightning Farts\": { name: \"Chain Lightning Farts\", description: \"Powerful magic that strikes multiple foes.\", manaCost: 5, attack: 12, defense: 0, healing: 0 },\n    \"Arcane Missile\": { name: \"Arcane Missile\", description: \"A reliable magic attack.\", manaCost: 2, attack: 5, defense: 0, healing: 0 },\n    \"Bean Rage\": { name: \"Bean Rage\", description: \"A furious, high-damage attack.\", manaCost: 3, attack: 15, defense: 0, healing: 0 },\n    \"Mighty Cleave\": { name: \"Mighty Cleave\", description: \"A strong swing that can hit adjacent enemies.\", manaCost: 2, attack: 7, defense: 0, healing: 0 },\n    \"Unstoppable Charge\": { name: \"Unstoppable Charge\", description: \"A powerful charge that breaks defenses.\", manaCost: 4, attack: 10, defense: 0, healing: 0 },\n    \"Aroma Heal\": { name: \"Aroma Heal\", description: \"A powerful healing spell.\", manaCost: 3, attack: 0, defense: 0, healing: 20 },\n    \"Blessing of Freshness\": { name: \"Blessing of Freshness\", description: \"Gain a significant amount of defense.\", manaCost: 2, attack: 0, defense: 10, healing: 0 },\n    \"Resurrection\": { name: \"Resurrection\", description: \"Revive a fallen ally (or yourself).\", manaCost: 8, attack: 0, defense: 0, healing: 50 },\n    \"Basic Smite\": { name: \"Basic Smite\", description: \"A minor holy attack.\", manaCost: 1, attack: 2, defense: 0, healing: 0 },\n    \"Hostile Takeover\": { name: \"Hostile Takeover\", description: \"Weaken an enemy and steal their strength.\", manaCost: 4, attack: 5, defense: 0, healing: 0 },\n    \"Corporate Merger\": { name: \"Corporate Merger\", description: \"Combine two cards for a stronger effect.\", manaCost: 5, attack: 0, defense: 0, healing: 0 },\n    \"Invest\": { name: \"Invest\", description: \"Sacrifice your turn to gain more mana next turn.\", manaCost: 1, attack: 0, defense: 0, healing: 0 },\n};\n\n\nexport type CharacterClass = {\n  id: string;\n  name: string;\n  image: string;\n  imageHint: string;\n  attributes: {\n    strengths: string[];\n    weaknesses: string[];\n  };\n  stats: {\n    attack: number;\n    defense: number;\n    speed: number;\n  };\n  specialTraits: string[];\n  starterDeck: { name: string; count: number }[];\n  weaknessesToKnow: string[];\n  signatureCard: string;\n  specialAbility: string;\n  playstyle: string;\n};\n\nexport const CLASSES: CharacterClass[] = [\n  {\n    id: \"rogue\",\n    name: \"Sneaky Rogue\",\n    image: \"https://storage.googleapis.com/aifire-6e52e.appspot.com/users%2Fw9Iax1D99SMbV6n53s7y2t1a36A2%2Fprojects%2Fstudio-2365687152-9579e%2Ffiles%2F1725568551717_image.png\",\n    imageHint: \"rogue man\",\n    attributes: {\n      strengths: [\"Stealth +90%\", \"Critical Hit +75%\", \"Speed +80%\"],\n      weaknesses: [\"Defense -60%\", \"HP -40%\", \"Area Damage -70%\"],\n    },\n    stats: { attack: 80, defense: 30, speed: 70 },\n    specialTraits: [\"Stealth Master\", \"Critical Strike Expert\", \"Glass Cannon (Fragile)\"],\n    starterDeck: [\n      { name: \"Silent But Deadly\", count: 3 },\n      { name: \"Backstab\", count: 2 },\n      { name: \"Smoke Bomb\", count: 2 },\n      { name: \"Basic Attack\", count: 8 },\n    ],\n    weaknessesToKnow: [\"Low health pool - avoid direct hits\", \"Poor against groups\", \"Relies on positioning\"],\n    signatureCard: \"Silent But Deadly (Invisible poison DOT)\",\n    specialAbility: \"Phase through enemies once per battle\",\n    playstyle: \"Hit-and-run, single-target assassinations\",\n  },\n  {\n    id: \"paladin\",\n    name: \"Paladin of Purity\",\n    image: \"https://storage.googleapis.com/aifire-6e52e.appspot.com/users%2Fw9Iax1D99SMbV6n53s7y2t1a36A2%2Fprojects%2Fstudio-2365687152-9579e%2Ffiles%2F1725569420067_image.png\",\n    imageHint: \"female knight\",\n    attributes: {\n      strengths: [\"Defense +85%\", \"Healing +90%\", \"Debuff Resistance +100%\"],\n      weaknesses: [\"Damage -50%\", \"Speed -45%\", \"Mana Regen -30%\"],\n    },\n    stats: { attack: 40, defense: 90, speed: 20 },\n    specialTraits: [\"Ultimate Tank\", \"Party Healer\", \"Debuff Immune\"],\n    starterDeck: [\n        { name: \"Smell the Truth\", count: 3 },\n        { name: \"Holy Shield\", count: 2 },\n        { name: \"Purify\", count: 2 },\n        { name: \"Basic Attack\", count: 8 },\n    ],\n    weaknessesToKnow: [\"Very low damage output\", \"Slow and ponderous\", \"Reliant on party members\"],\n    signatureCard: \"Smell the Truth (Reveals enemy weakness, heals party)\",\n    specialAbility: \"Divine Shield absorbs 3 attacks\",\n    playstyle: \"Tank/support, slow but unbreakable\",\n  },\n  {\n    id: \"wizard\",\n    name: \"Wizard of Wind\",\n    image: \"https://picsum.photos/seed/wizard/600/800\",\n    imageHint: \"wizard robes\",\n    attributes: {\n      strengths: [\"AOE Damage +95%\", \"Elemental Mastery +85%\", \"Mana +100%\"],\n      weaknesses: [\"Physical Defense -65%\", \"HP -55%\", \"Chaos Risk +40%\"],\n    },\n    stats: { attack: 95, defense: 20, speed: 50 },\n    specialTraits: [\"AOE Specialist\", \"Master of Elements\", \"High Risk / High Reward\"],\n    starterDeck: [\n        { name: \"Gas Cloud\", count: 3 },\n        { name: \"Chain Lightning Farts\", count: 2 },\n        { name: \"Arcane Missile\", count: 2 },\n        { name: \"Basic Attack\", count: 8 },\n    ],\n    weaknessesToKnow: [\"Extremely fragile\", \"Can miscast spells, causing self-damage\", \"Vulnerable to silence\"],\n    signatureCard: \"Gas Cloud (Damages all enemies + confusion)\",\n    specialAbility: \"Chain Lightning Farts (bounces between enemies)\",\n    playstyle: \"Glass cannon, elemental combos\",\n  },\n  {\n    id: \"barbarian\",\n    name: \"Barbarian of Beans\",\n    image: \"https://picsum.photos/seed/barbarian/600/800\",\n    imageHint: \"muscular warrior\",\n    attributes: {\n      strengths: [\"Melee Damage +100%\", \"HP +90%\", \"Knockback +80%\"],\n      weaknesses: [\"Accuracy -50%\", \"Magic Resist -60%\", \"Control -70%\"],\n    },\n    stats: { attack: 100, defense: 50, speed: 40 },\n    specialTraits: [\"Pure Damage\", \"High Health Pool\", \"Uncontrollable Rage\"],\n    starterDeck: [\n        { name: \"Bean Rage\", count: 3 },\n        { name: \"Mighty Cleave\", count: 2 },\n        { name: \"Unstoppable Charge\", count: 2 },\n        { name: \"Basic Attack\", count: 8 },\n    ],\n    weaknessesToKnow: [\"Attacks can miss frequently\", \"Vulnerable to magic\", \"May attack allies in rage mode\"],\n    signatureCard: \"Bean Rage (Massive AOE, self-damage over time)\",\n    specialAbility: \"Unstoppable Charge (breaks through defenses)\",\n    playstyle: \"Berserk aggro, high-risk/reward\",\n  },\n  {\n    id: \"cleric\",\n    name: \"Cleric of Febreze\",\n    image: \"https://picsum.photos/seed/cleric/600/800\",\n    imageHint: \"healer robes\",\n    attributes: {\n      strengths: [\"Healing +95%\", \"Buff Duration +80%\", \"Revive Chance +50%\"],\n      weaknesses: [\"Offensive Power -75%\", \"Speed -40%\", \"Solo Weak\"],\n    },\n    stats: { attack: 10, defense: 60, speed: 30 },\n    specialTraits: [\"Master Healer\", \"Support Specialist\", \"Can Revive Allies\"],\n    starterDeck: [\n        { name: \"Aroma Heal\", count: 3 },\n        { name: \"Blessing of Freshness\", count: 2 },\n        { name: \"Resurrection\", count: 1 },\n        { name: \"Basic Smite\", count: 9 },\n    ],\n    weaknessesToKnow: [\"Almost no solo damage capability\", \"Easily overwhelmed when alone\", \"Long cooldowns on powerful abilities\"],\n    signatureCard: \"Aroma Heal (Mass heal + cleanse debuffs)\",\n    specialAbility: \"Resurrection (1 use per dungeon)\",\n    playstyle: \"Pure support, party-dependent\",\n  },\n  {\n    id: \"tycoon\",\n    name: \"Tycoon of Toots\",\n    image: \"https://picsum.photos/seed/tycoon/600/800\",\n    imageHint: \"business suit\",\n    attributes: {\n      strengths: [\"Resource Gain +90%\", \"Summons +85%\", \"Versatility +75%\"],\n      weaknesses: [\"Direct Damage -55%\", \"Fragile -50%\", \"Setup Time\"],\n    },\n    stats: { attack: 30, defense: 40, speed: 60 },\n    specialTraits: [\"Economic Powerhouse\", \"Summoner\", \"Strategic Genius\"],\n    starterDeck: [\n        { name: \"Hostile Takeover\", count: 2 },\n        { name: \"Corporate Merger\", count: 2 },\n        { name: \"Invest\", count: 3 },\n        { name: \"Basic Attack\", count: 8 },\n    ],\n    weaknessesToKnow: [\"Needs time to build up power\", \"Summons are fragile initially\", \"Low direct impact in early combat\"],\n    signatureCard: \"Hostile Takeover (Steal enemy buffs + gold)\",\n    specialAbility: \"Corporate Merger (fuse two weak cards -> powerful)\",\n    playstyle: \"Economic strategy, long-game dominance\",\n  },\n];\n\nexport const getClass = (id: string) => {\n    return CLASSES.find(c => c.id === id);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 782, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/generate-encounter-flow.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview This file defines the Genkit flow for generating combat encounters.\n *\n * - generateEncounter - A function that creates enemies and loot.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { EncounterInputSchema, EncounterOutputSchema, type EncounterOutput, type EncounterInput } from './flow-schemas';\n\n\nexport async function generateEncounter(input: EncounterInput): Promise<EncounterOutput> {\n    return generateEncounterFlow(input);\n}\n\nconst generateEncounterPrompt = ai.definePrompt({\n    name: 'generateEncounterPrompt',\n    input: { schema: EncounterInputSchema },\n    output: { schema: EncounterOutputSchema },\n    prompt: `You are the AI Dungeon Master for Poot Quest. Your task is to generate a challenging but fair combat encounter for the player.\n\n  Player Information:\n  - Class: {{playerClass}}\n  - Level: {{playerLevel}}\n  - Location: {{location}}\n\n  Based on this information, generate an encounter with the following properties:\n  1.  **Enemies**: Create a group of 1 to 3 enemies. The enemies should be thematically appropriate for the location. Their total difficulty should be a reasonable challenge for the player's level. Each enemy needs a unique ID.\n  2.  **Loot**: Generate one piece of loot that the player will receive if they win. The loot should be useful and interesting for the specified player class.\n  3.  **Intro Text**: Write a short, engaging introductory text (1-2 sentences) to set the scene for the battle.\n\n  Example Output:\n  {\n    \"enemies\": [\n      {\n        \"id\": \"sewer-goblin-1\",\n        \"name\": \"Sewer Goblin\",\n        \"hp\": 15,\n        \"maxHp\": 15,\n        \"imageUrl\": \"https://picsum.photos/seed/sewer-goblin/100/100\",\n        \"attack\": 3\n      },\n      {\n        \"id\": \"giant-rat-1\",\n        \"name\": \"Giant Rat\",\n        \"hp\": 10,\n        \"maxHp\": 10,\n        \"imageUrl\": \"https://picsum.photos/seed/giant-rat/100/100\",\n        \"attack\": 2\n      }\n    ],\n    \"loot\": {\n      \"name\": \"Rusty Dagger\",\n      \"description\": \"A simple but sharp dagger. Better than nothing.\",\n      \"type\": \"weapon\"\n    },\n    \"introText\": \"From the murky depths of the sewer, a goblin and his pet rat emerge, eyes gleaming with malice!\"\n  }`,\n});\n\nconst generateEncounterFlow = ai.defineFlow(\n    {\n        name: 'generateEncounterFlow',\n        inputSchema: EncounterInputSchema,\n        outputSchema: EncounterOutputSchema,\n    },\n    async (input) => {\n        const { output } = await generateEncounterPrompt(input);\n        return output!;\n    }\n);\n"],"names":[],"mappings":";;;;;;IAWsB,oBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/ai-dungeon-master-npc.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview An AI agent for generating NPCs within the game dungeon.\n *\n * - generateNpc - A function that generates an NPC based on the player's context.\n * - NpcInput - The input type for the generateNpc function.\n * - NpcOutput - The return type for the generateNpc function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst NpcInputSchema = z.object({\n  location: z.string().describe('The current location of the player in the dungeon.'),\n  playerClass: z.string().describe('The class of the player character.'),\n  playerContext: z.object({\n    level: z.number().describe('The current level of the player.'),\n    choices: z.array(z.object({\n      id: z.string(),\n      text: z.string(),\n      tags: z.array(z.string())\n    })).describe('The choices the player has made so far.'),\n    reputation: z.object({\n      stealth: z.number(),\n      combat: z.number(),\n      diplomacy: z.number()\n    }).describe('The player reputation scores.'),\n    questFlags: z.record(z.string(), z.any()).describe('Flags indicating the status of various quests.')\n  }).describe('The player context, including level, choices, reputation, and quest flags.')\n});\n\nexport type NpcInput = z.infer<typeof NpcInputSchema>;\n\nconst NpcOutputSchema = z.object({\n  name: z.string().describe('The name of the NPC.'),\n  dialogue: z.string().describe('The dialogue the NPC speaks.'),\n  quest: z.string().optional().describe('A simple, actionable quest the NPC offers (e.g., \"Clear out the Rat King in the cellar\").'),\n  questId: z.string().optional().describe('A simple, machine-readable ID for the quest (e.g., \"rat_king_quest\").'),\n  reward: z.string().optional().describe('The reward for completing the quest, if any.')\n});\n\nexport type NpcOutput = z.infer<typeof NpcOutputSchema>;\n\nexport async function generateNpc(input: NpcInput): Promise<NpcOutput> {\n  return generateNpcFlow(input);\n}\n\nconst generateNpcPrompt = ai.definePrompt({\n  name: 'generateNpcPrompt',\n  input: {schema: NpcInputSchema},\n  output: {schema: NpcOutputSchema},\n  prompt: `You are the AI Dungeon Master for Poot Quest. Your job is to create a living, breathing NPC that feels like a real part of the world.\n\n  **Player Context:**\n  - Class: {{playerClass}}\n  - Level: {{playerContext.level}}\n  - Location: {{location}}\n  - Reputation: Stealth: {{playerContext.reputation.stealth}}, Combat: {{playerContext.reputation.combat}}, Diplomacy: {{playerContext.reputation.diplomacy}}\n  - Known for: {{#each playerContext.choices}}- {{this.text}} {{/each}}\n  - Active Quests: {{#each playerContext.questFlags}} {{this}} {{/each}}\n\n  **Your Task:**\n  Create an NPC that is a direct reflection of the world and the player's journey.\n  1.  **Personality:** Give them a distinct personality that fits the {{location}}.\n  2.  **Reactive Dialogue:** The NPC's dialogue **must** reflect the player's reputation and past actions. They should not be generic. If combat reputation is high, they might be fearful, aggressive, or admiring. If diplomacy is high, they might be trusting or manipulative. They might even mention a specific past deed.\n  3.  **Quest Generation:** The NPC should offer a simple, actionable quest that makes sense for the location, their personality, and the player's class. The quest MUST have a simple, snake_case 'questId'.\n\n  **Example (for a player with high Combat reputation who recently cleared a goblin camp):**\n  - Name: \"Grizelda the Grim\"\n  - Dialogue: \"Easy there, killer. I saw what you did to Gassy's goons at the camp. I want no trouble. State your business and be on your way.\"\n  - Quest: \"If you're so tough, maybe you can clear out the Rat King deeper in. There's a rusty key in it for you.\"\n  - questId: \"clear_rat_king\"\n  - Reward: \"A Rusty Key\"\n\n  **Example (for a player with high Diplomacy reputation):**\n  - Name: \"Silas the Merchant\"\n  - Dialogue: \"Ah, the silver-tongued warrior! Your reputation precedes you. I heard you negotiated the release of the Brewer's son. A fine piece of work. Perhaps we can do business?\"\n\n  Return the NPC in the specified JSON format. If you offer a quest, you MUST provide a questId.`\n});\n\nconst generateNpcFlow = ai.defineFlow(\n  {\n    name: 'generateNpcFlow',\n    inputSchema: NpcInputSchema,\n    outputSchema: NpcOutputSchema,\n  },\n  async input => {\n    const {output} = await generateNpcPrompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;;IA2CsB,cAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/game/AdventureClient.tsx"],"sourcesContent":["\n\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport {\n  generateNextScenario,\n  NarrativeOutput,\n} from \"@/ai/flows/branching-narrative-system\";\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Loader2, BookOpen, Forward } from \"lucide-react\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport Link from \"next/link\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useDoc, useFirebase, useMemoFirebase } from \"@/firebase\";\nimport { doc, arrayUnion, writeBatch, increment } from \"firebase/firestore\";\nimport { updateDocumentNonBlocking } from \"@/firebase/non-blocking-updates\";\nimport { CLASSES } from \"@/lib/game-data\";\nimport { generateEncounter } from \"@/ai/flows/generate-encounter-flow\";\nimport { useRouter } from \"next/navigation\";\nimport { generateNpc, NpcOutput } from \"@/ai/flows/ai-dungeon-master-npc\";\n\ninterface AdventureClientProps {\n  characterId: string;\n}\n\ntype GameState = \"loading\" | \"generating\" | \"ready\";\n\nexport function AdventureClient({ characterId }: AdventureClientProps) {\n  const { firestore, user } = useFirebase();\n  const router = useRouter();\n  const [gameState, setGameState] = useState<GameState>(\"loading\");\n  const [error, setError] = useState<string | null>(null);\n\n  const narrativeContextRef = useMemoFirebase(() => {\n    if (!firestore || !user) return null;\n    return doc(firestore, `users/${user.uid}/characters/${characterId}/narrativeContexts`, \"main\");\n  }, [firestore, user, characterId]);\n\n  const { data: narrativeContext, isLoading: isContextLoading } = useDoc<any>(narrativeContextRef);\n\n  const characterDocRef = useMemoFirebase(() => {\n    if (!firestore || !user) return null;\n    return doc(firestore, `users/${user.uid}/characters/${characterId}`);\n  }, [firestore, user, characterId]);\n\n  const { data: character, isLoading: isCharacterLoading } = useDoc<any>(characterDocRef);\n\n  const characterClassData = useMemo(() => {\n    if (!character) return null;\n    return CLASSES.find(c => c.id === character.class);\n  }, [character]);\n\n  const generateAndSaveNextScenario = async () => {\n    if (!narrativeContext || !firestore || !user || !characterClassData || !character || !narrativeContextRef) return;\n    \n    try {\n      setGameState(\"generating\");\n\n      const sanitizedChoices = narrativeContext.playerChoices.map((choice: any) => ({\n        id: choice.id,\n        text: choice.text,\n        tags: choice.tags,\n      }));\n\n      const result = await generateNextScenario({\n        playerClass: characterClassData.name,\n        level: character.level,\n        location: narrativeContext.location,\n        choices: sanitizedChoices,\n        reputation: {\n          stealth: narrativeContext.reputationStealth,\n          combat: narrativeContext.reputationCombat,\n          diplomacy: narrativeContext.reputationDiplomacy,\n        },\n        unlockedPaths: narrativeContext.unlockedPaths,\n        questFlags: narrativeContext.questFlags,\n      });\n\n      if (result) {\n        updateDocumentNonBlocking(narrativeContextRef, {\n            currentScenario: result,\n            triggerNextScenario: false // Reset the trigger\n        });\n        setGameState(\"ready\");\n      } else {\n        throw new Error(\"The AI Dungeon Fartmaster is confused. No scenario received.\");\n      }\n    } catch (e: any) {\n      setError(e.message || \"An unknown error occurred while generating the scenario.\");\n      setGameState(\"loading\");\n    }\n  };\n  \n  // This effect listens for the trigger from the battle screen.\n  useEffect(() => {\n    if (narrativeContext?.triggerNextScenario) {\n      generateAndSaveNextScenario();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [narrativeContext?.triggerNextScenario]);\n\n\n  const handleStart = () => {\n    generateAndSaveNextScenario();\n  };\n\n  const handleChoice = async (choice: { id: string; text: string; tags: string[] }) => {\n    if (!narrativeContextRef || !firestore || !user || !characterClassData || !character || !narrativeContext) return;\n    setGameState(\"generating\");\n\n    const choiceData = { id: choice.id, text: choice.text, tags: choice.tags, timestamp: new Date().toISOString() };\n    \n    // Use a write batch for atomic updates\n    const batch = writeBatch(firestore);\n\n    batch.update(narrativeContextRef, {\n        playerChoices: arrayUnion(choiceData),\n        currentScenario: null, // Clear current scenario\n    });\n\n    // Update reputation scores\n    if (choice.tags.includes(\"STEALTH\")) {\n        batch.update(narrativeContextRef, { reputationStealth: increment(1) });\n    }\n    if (choice.tags.includes(\"COMBAT\")) {\n        batch.update(narrativeContextRef, { reputationCombat: increment(1) });\n    }\n    if (choice.tags.includes(\"DIPLOMACY\")) {\n        batch.update(narrativeContextRef, { reputationDiplomacy: increment(1) });\n    }\n    \n    try {\n        if (choice.tags.includes(\"COMBAT\")) {\n            const encounterResult = await generateEncounter({\n                playerClass: characterClassData.name,\n                playerLevel: character.level,\n                location: narrativeContext.location,\n            });\n\n            batch.update(narrativeContextRef, { currentEncounter: encounterResult });\n            await batch.commit();\n            router.push('/battle');\n\n        } else if (choice.tags.includes(\"NPC_INTERACTION\")) {\n            const sanitizedChoices = narrativeContext.playerChoices.map((c: any) => ({\n              id: c.id, text: c.text, tags: c.tags\n            }));\n\n            const npcResult = await generateNpc({\n                location: narrativeContext.location,\n                playerClass: characterClassData.name,\n                playerContext: {\n                    level: character.level,\n                    choices: sanitizedChoices,\n                    reputation: {\n                        stealth: narrativeContext.reputationStealth,\n                        combat: narrativeContext.reputationCombat,\n                        diplomacy: narrativeContext.reputationDiplomacy,\n                    },\n                    questFlags: narrativeContext.questFlags,\n                }\n            });\n\n            let updates: any = {};\n            if (npcResult.quest && npcResult.questId) {\n                updates[`questFlags.${npcResult.questId}`] = \"started\";\n            }\n            updates.lastNarration = `${npcResult.name} says: \"${npcResult.dialogue}\" ${npcResult.quest ? `\\n\\nNew Quest: ${npcResult.quest}`: ''}`;\n            updates.triggerNextScenario = true; // Go to next story bit\n            \n            batch.update(narrativeContextRef, updates);\n            await batch.commit();\n        } else {\n             batch.update(narrativeContextRef, { triggerNextScenario: true }); // Skip battle and go to next scenario\n             await batch.commit();\n        }\n\n    } catch (e: any) {\n        setError(e.message || \"An unknown error occurred while processing your choice.\");\n        setGameState(\"loading\");\n    }\n  };\n  \n  const isLoading = isContextLoading || isCharacterLoading;\n  const currentScenario = narrativeContext?.currentScenario as NarrativeOutput | undefined;\n\n  const renderContent = () => {\n    if (isLoading) {\n      return (\n        <div className=\"flex flex-col items-center justify-center text-center\">\n          <Loader2 className=\"h-16 w-16 animate-spin text-primary mb-4\" />\n          <p className=\"text-xl text-muted-foreground\">Loading your legend...</p>\n        </div>\n      );\n    }\n\n    if (error) {\n        return (\n          <Alert variant=\"destructive\">\n            <AlertTitle>AI Error</AlertTitle>\n            <AlertDescription>{error}</AlertDescription>\n          </Alert>\n        );\n    }\n    \n    if (!narrativeContext || !character) {\n      return (\n        <div className=\"text-center\">\n          <p className=\"text-lg text-destructive\">Could not find your character's story. It might be lost in the ether...</p>\n          <Button asChild variant=\"secondary\" className=\"mt-4\">\n            <Link href=\"/character-creation\">Start a New Adventure</Link>\n          </Button>\n        </div>\n      );\n    }\n\n    if (gameState === 'generating') {\n         return (\n          <div className=\"flex flex-col items-center justify-center text-center\">\n            <Loader2 className=\"h-16 w-16 animate-spin text-primary mb-4\" />\n            <p className=\"text-xl text-muted-foreground\">\n              The story unfolds...\n            </p>\n          </div>\n        );\n    }\n\n    if (currentScenario) {\n      return (\n        <div className=\"space-y-4\">\n          <p className=\"text-center text-lg leading-relaxed whitespace-pre-wrap mb-6\">\n            {currentScenario.scenarioText}\n          </p>\n          <Separator />\n          <p className=\"text-center text-lg font-bold pt-4\">What do you do next?</p>\n          {currentScenario.choices.map((choice) => (\n            <Button\n              key={choice.id}\n              onClick={() => handleChoice(choice)}\n              className=\"w-full justify-start\"\n              variant=\"secondary\"\n              size=\"lg\"\n            >\n              <span className=\"font-bold mr-4\">{choice.id}</span> {choice.text}\n            </Button>\n          ))}\n        </div>\n      );\n    }\n    \n    // Default Intro State (or if there's no current scenario)\n    return (\n      <div className=\"space-y-6 text-center\">\n        <div className=\"p-4 bg-muted rounded-lg\">\n          <h3 className=\"font-headline text-lg text-accent flex items-center justify-center gap-2\">\n            <BookOpen /> Your Story Arc\n          </h3>\n          <p className=\"text-muted-foreground italic mt-2\">\n            &quot;{narrativeContext.storyArc}&quot;\n          </p>\n        </div>\n        <p className=\"text-lg leading-relaxed whitespace-pre-wrap\">\n          {narrativeContext.lastNarration}\n        </p>\n        <Button onClick={handleStart} size=\"lg\" disabled={gameState === 'generating'}>\n          What do you do? <Forward className=\"ml-2 h-4 w-4\" />\n        </Button>\n      </div>\n    );\n  };\n\n\n  return (\n    <Card className=\"max-w-3xl mx-auto shadow-lg shadow-primary/10\">\n      <CardHeader>\n        <CardTitle className=\"font-headline text-3xl text-glow\">\n          The Adventure Begins\n        </CardTitle>\n        <CardDescription>\n          {narrativeContext?.location || \"A mysterious place...\"}\n        </CardDescription>\n      </CardHeader>\n      <CardContent>{renderContent()}</CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}